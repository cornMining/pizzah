<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пиццерия PRO | Заработок</title>
    <style>
        :root {
            --primary: #E74C3C;
            --secondary: #C0392B;
            --accent: #F39C12;
            --dark: #96281B;
            --light: #FADBD8;
            --text: #333;
            --error: #E74C3C;
            --coin: #F1C40F;
            --token: #9B59B6;
            --money: #2ECC71;
            --dough: #F5D76E;
            --tomato: #E74C3C;
            --cheese: #F4D03F;
            --customer: #3498DB;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 20px;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text);
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            width: 100%;
            position: relative;
            overflow: hidden;
            border: 3px solid var(--accent);
        }
        
        h1 {
            color: var(--dark);
            margin-bottom: 15px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .tutorial {
            background-color: #E3F2FD;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: left;
            border-left: 5px solid #2196F3;
        }
        
        .tutorial h3 {
            margin-top: 0;
            color: #1976D2;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
            background-color: var(--light);
            padding: 15px;
            border-radius: 15px;
            font-size: 16px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.3em;
            margin: 5px 0;
        }
        
        .dough-count {
            color: var(--dough);
        }
        
        .tomato-count {
            color: var(--tomato);
        }
        
        .cheese-count {
            color: var(--cheese);
        }
        
        .coin-count {
            color: var(--coin);
        }
        
        .token-count {
            color: var(--token);
        }
        
        .money-count {
            color: var(--money);
        }
        
        .pizza-kitchen {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 20px;
            padding: 10px;
            background-color: rgba(231, 76, 60, 0.1);
            border-radius: 15px;
        }
        
        .oven {
            height: 80px;
            width: 80px;
            background-color: #8D6E63;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3);
            border: 2px solid #5D4037;
        }
        
        .oven:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .oven.empty:hover {
            background-color: #7B5D4B;
        }
        
        .pizza {
            width: 60px;
            height: 60px;
            background-color: var(--dough);
            border-radius: 50%;
            position: relative;
            transform-origin: center;
            animation: grow 0.8s ease-out;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }
        
        .pizza:before {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background-color: var(--tomato);
            border-radius: 50%;
            z-index: 1;
        }
        
        .pizza:after {
            content: "";
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            background-color: var(--cheese);
            border-radius: 50%;
            z-index: 2;
        }
        
        .pizza.golden {
            box-shadow: 0 0 15px #FFD700;
            animation: glow 2s infinite alternate;
        }
        
        .cooking-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 6px;
            background-color: var(--primary);
            width: 0%;
            transition: width 1s linear;
            z-index: 1;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        button {
            background-color: var(--primary);
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 15px;
            cursor: pointer;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 150px;
            justify-content: center;
        }
        
        button.coin-button {
            background-color: var(--coin);
            color: #333;
        }
        
        button.token-button {
            background-color: var(--token);
            color: white;
        }
        
        button.money-button {
            background-color: var(--money);
            color: white;
        }
        
        button.customer-button {
            background-color: var(--customer);
            color: white;
        }
        
        button:hover:not(:disabled) {
            background-color: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        button.coin-button:hover:not(:disabled) {
            background-color: #F39C12;
        }
        
        button.token-button:hover:not(:disabled) {
            background-color: #8E44AD;
        }
        
        button.money-button:hover:not(:disabled) {
            background-color: #27AE60;
        }
        
        button.customer-button:hover:not(:disabled) {
            background-color: #2980B9;
        }
        
        button:disabled {
            background-color: #BDBDBD;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--light);
            padding-bottom: 5px;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            color: var(--text);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-size: 1em;
            border-radius: 8px 8px 0 0;
        }
        
        .tab.active {
            color: var(--dark);
            border-bottom-color: var(--primary);
            background-color: rgba(231, 76, 60, 0.1);
        }
        
        .tab:hover:not(.active) {
            background-color: rgba(231, 76, 60, 0.05);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .market-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            margin-bottom: 12px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .market-item:hover {
            transform: translateY(-3px);
        }
        
        .market-item-info {
            flex-grow: 1;
            text-align: left;
        }
        
        .market-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        
        .market-item-desc {
            font-size: 0.9em;
            color: #616161;
        }
        
        .market-item-price {
            font-size: 1em;
            color: var(--coin);
            font-weight: bold;
            margin-right: 15px;
        }
        
        .withdraw-form {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1em;
            color: var(--dark);
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
        }
        
        .withdraw-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #E3F2FD;
            border-radius: 10px;
            text-align: left;
            font-size: 0.95em;
            border-left: 5px solid #2196F3;
        }
        
        .money-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            font-size: 1em;
            border: 1px solid rgba(46, 204, 113, 0.3);
        }
        
        .upgrade {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            text-align: left;
            transition: transform 0.3s;
            border-left: 5px solid var(--accent);
        }
        
        .upgrade:hover {
            transform: translateY(-3px);
        }
        
        .upgrade-title {
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            font-size: 1.1em;
        }
        
        .upgrade-desc {
            font-size: 0.95em;
            color: #616161;
            margin-bottom: 15px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transform: translateX(200%);
            transition: transform 0.3s ease-out;
            z-index: 1000;
            max-width: 350px;
        }
        
        .notification.coin-notification {
            background-color: var(--coin);
            color: #333;
        }
        
        .notification.token-notification {
            background-color: var(--token);
            color: white;
        }
        
        .notification.money-notification {
            background-color: var(--money);
            color: white;
        }
        
        .notification.customer-notification {
            background-color: var(--customer);
            color: white;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .progress-bar {
            height: 5px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: white;
            width: 0%;
            transition: width 0.3s;
        }
        
        .promo-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .promo-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .promo-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 3px solid var(--accent);
        }
        
        .promo-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }
        
        .promo-close:hover {
            color: #333;
        }
        
        .promo-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            font-size: 16px;
            margin: 15px 0;
            text-align: center;
        }
        
        .promo-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .promo-button:hover {
            background-color: var(--dark);
            transform: translateY(-2px);
        }
        
        .promo-info {
            margin-top: 20px;
            font-size: 0.9em;
            color: #666;
        }
        
        .promo-tab {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--token);
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 14px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        
        .promo-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .wheel-container {
            margin: 20px auto;
            width: 300px;
            height: 300px;
            position: relative;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 10px solid #333;
            box-shadow: 0 0 0 5px #fff, 0 0 0 10px #333;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
        }
        
        .wheel-section {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .wheel-arrow {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 30px solid #E74C3C;
            z-index: 10;
        }
        
        .wheel-button {
            margin-top: 20px;
            background-color: var(--token);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .wheel-button:hover {
            background-color: #8E44AD;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .wheel-button:disabled {
            background-color: #BDBDBD;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .oven-status {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 0.7em;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .ingredient-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            margin-bottom: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            border-left: 5px solid var(--accent);
        }
        
        .ingredient-item:hover {
            transform: translateY(-3px);
        }
        
        .ingredient-item-info {
            flex-grow: 1;
            text-align: left;
        }
        
        .ingredient-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        
        .ingredient-item-desc {
            font-size: 0.9em;
            color: #616161;
        }
        
        .pizza-recipe {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            text-align: left;
            border-left: 5px solid var(--accent);
        }
        
        .pizza-recipe-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .pizza-recipe-ingredients {
            font-size: 0.9em;
            color: #616161;
            margin-bottom: 10px;
        }
        
        .pizza-recipe-price {
            font-weight: bold;
            color: var(--coin);
        }
        
        .rank-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            background-color: var(--accent);
            color: white;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .customer-order {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            text-align: left;
            border-left: 5px solid var(--customer);
            position: relative;
        }
        
        .customer-order-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
        }
        
        .customer-order-time {
            font-size: 0.8em;
            color: #616161;
            margin-bottom: 10px;
        }
        
        .customer-order-ingredients {
            font-size: 0.9em;
            color: #616161;
            margin-bottom: 10px;
        }
        
        .customer-order-reward {
            font-weight: bold;
            color: var(--money);
        }
        
        .customer-order-status {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.8em;
            padding: 3px 8px;
            border-radius: 10px;
            background-color: var(--accent);
            color: white;
        }
        
        .achievement {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            text-align: left;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .achievement-icon {
            font-size: 2em;
            min-width: 50px;
            text-align: center;
        }
        
        .achievement-info {
            flex-grow: 1;
        }
        
        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .achievement-desc {
            font-size: 0.9em;
            color: #616161;
            margin-bottom: 5px;
        }
        
        .achievement-progress {
            height: 5px;
            background-color: #eee;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .achievement-progress-bar {
            height: 100%;
            background-color: var(--accent);
            width: 0%;
        }
        
        .achievement-reward {
            font-size: 0.8em;
            color: var(--coin);
        }
        
        .achievement-locked {
            opacity: 0.6;
        }
        
        .achievement-unlocked .achievement-icon {
            color: var(--accent);
        }
        
        .level-bar {
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }
        
        .level-progress {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s;
        }
        
        .level-text {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 2px rgba(0,0,0,0.5);
        }
        
        .daily-bonus {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .daily-bonus.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .daily-bonus-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 3px solid var(--accent);
        }
        
        .daily-bonus-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .daily-bonus-reward {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .daily-bonus-button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .daily-bonus-button:hover {
            background-color: var(--dark);
            transform: translateY(-2px);
        }

        /* Рекламное окно */
        .ad-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .ad-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .ad-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 3px solid var(--accent);
        }
        
        .ad-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }
        
        .ad-close:hover {
            color: #333;
        }
        
        .ad-text {
            font-size: 1.1em;
            line-height: 1.5;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .ad-button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .ad-button:hover {
            background-color: var(--dark);
            transform: translateY(-2px);
        }
        
        .ad-timer {
            font-size: 0.9em;
            color: #666;
            margin-top: 15px;
        }
        
        @keyframes grow {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 10px #FFD700; }
            100% { box-shadow: 0 0 20px #FFD700; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        .bounce {
            animation: bounce 0.5s;
        }
        
        .pulse {
            animation: pulse 1s infinite;
        }
        
        .pepperoni-topping {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #E74C3C;
            border-radius: 50%;
            z-index: 3;
        }
        
        .mushroom-topping {
            position: absolute;
            width: 12px;
            height: 8px;
            background-color: #8D6E63;
            border-radius: 50%;
            z-index: 3;
        }
        
        .olive-topping {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #333;
            border-radius: 50%;
            z-index: 3;
        }
        
        .pepper-topping {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #2ECC71;
            border-radius: 50%;
            z-index: 3;
        }
        
        .onion-topping {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #9B59B6;
            border-radius: 50%;
            z-index: 3;
        }
        
        .bacon-topping {
            position: absolute;
            width: 12px;
            height: 6px;
            background-color: #C0392B;
            border-radius: 3px;
            z-index: 3;
        }
        
        @media (max-width: 768px) {
            .pizza-kitchen {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .stats {
                grid-template-columns: 1fr 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .promo-tab {
                top: 10px;
                right: 10px;
                font-size: 12px;
                padding: 6px 12px;
            }
            
            .wheel-container {
                width: 250px;
                height: 250px;
            }
        }
        
        @media (max-width: 480px) {
            .pizza-kitchen {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .game-container {
                padding: 15px;
            }
            
            .oven {
                height: 70px;
                width: 70px;
            }
            
            .wheel-container {
                width: 200px;
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1><span>🍕</span> Пиццерия PRO <span>👨‍🍳</span></h1>
        
        <div class="tutorial">
            <h3>Как играть?</h3>
            <ol>
                <li>Принимайте заказы от клиентов (вкладка "Заказы")</li>
                <li>Готовьте пиццы в печах (вкладка "Кухня")</li>
                <li>Покупайте ингредиенты (вкладка "Ингредиенты")</li>
                <li>Улучшайте свою пиццерию (вкладка "Улучшения")</li>
                <li>Открывайте новые рецепты и ингредиенты</li>
                <li>Зарабатывайте достижения (вкладка "Достижения")</li>
                <li>Крутите колесо фортуны за токены (вкладка "Колесо фортуны")</li>
                <li>Выводите деньги (вкладка "Вывод")</li>
            </ol>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="kitchen">Кухня</div>
            <div class="tab" data-tab="orders">Заказы</div>
            <div class="tab" data-tab="ingredients">Ингредиенты</div>
            <div class="tab" data-tab="upgrades">Улучшения</div>
            <div class="tab" data-tab="achievements">Достижения</div>
            <div class="tab" data-tab="wheel">Колесо фортуны</div>
            <div class="tab" data-tab="withdraw">Вывод</div>
        </div>
        
        <div class="tab-content active" id="kitchen-tab">
            <div class="stats">
                <div class="stat">
                    <div>Тесто</div>
                    <div class="stat-value dough-count" id="dough-count">0</div>
                    <div>🥖</div>
                </div>
                <div class="stat">
                    <div>Томатный соус</div>
                    <div class="stat-value tomato-count" id="tomato-count">0</div>
                    <div>🍅</div>
                </div>
                <div class="stat">
                    <div>Сыр</div>
                    <div class="stat-value cheese-count" id="cheese-count">0</div>
                    <div>🧀</div>
                </div>
                <div class="stat">
                    <div>Монеты</div>
                    <div class="stat-value coin-count" id="coin-count">0</div>
                    <div>🪙</div>
                </div>
                <div class="stat">
                    <div>Токены</div>
                    <div class="stat-value token-count" id="token-count">0</div>
                    <div>🔶</div>
                </div>
                <div class="stat">
                    <div>Деньги</div>
                    <div class="stat-value money-count" id="money-count">$0.00</div>
                    <div>💵</div>
                </div>
            </div>
            
            <div class="level-bar">
                <div class="level-progress" id="level-progress"></div>
                <div class="level-text" id="level-text">Уровень 1: 0/100</div>
            </div>
            
            <div class="pizza-kitchen" id="pizza-kitchen">
                <!-- 15 печей будут добавлены через JavaScript -->
            </div>
            
            <div class="buttons">
                <button id="make-pizza" class="coin-button">
                    <span>🍕</span> Сделать пиццу
                </button>
                <button id="buy-token" class="token-button">
                    <span>🔶</span> Купить токен (<span id="token-cost">5000</span>🪙)
                </button>
                <button id="call-customer" class="customer-button">
                    <span>👨‍👩‍👧‍👦</span> Пригласить клиентов
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="orders-tab">
            <h2>Активные заказы</h2>
            <div id="active-orders">
                <!-- Активные заказы будут добавлены через JavaScript -->
            </div>
            
            <h2>Доступные рецепты</h2>
            <div class="pizza-recipe">
                <div class="pizza-recipe-title">Маргарита <span class="rank-badge">Уровень 1</span></div>
                <div class="pizza-recipe-ingredients">Ингредиенты: Тесто, Томатный соус, Сыр</div>
                <div class="pizza-recipe-price">Цена: 10 монет</div>
                <button class="coin-button" id="make-margherita">Приготовить</button>
            </div>
            
            <div class="pizza-recipe">
                <div class="pizza-recipe-title">Пепперони <span class="rank-badge">Уровень 2</span></div>
                <div class="pizza-recipe-ingredients">Ингредиенты: Тесто, Томатный соус, Сыр, Пепперони</div>
                <div class="pizza-recipe-price">Цена: 15 монет</div>
                <button class="coin-button" id="make-pepperoni" disabled>Приготовить</button>
            </div>
            
            <div class="pizza-recipe">
                <div class="pizza-recipe-title">Грибная <span class="rank-badge">Уровень 3</span></div>
                <div class="pizza-recipe-ingredients">Ингредиенты: Тесто, Томатный соус, Сыр, Грибы</div>
                <div class="pizza-recipe-price">Цена: 18 монет</div>
                <button class="coin-button" id="make-mushroom" disabled>Приготовить</button>
            </div>
            
            <div class="pizza-recipe">
                <div class="pizza-recipe-title">Гавайская <span class="rank-badge">Уровень 4</span></div>
                <div class="pizza-recipe-ingredients">Ингредиенты: Тесто, Томатный соус, Сыр, Ветчина, Ананас</div>
                <div class="pizza-recipe-price">Цена: 20 монет</div>
                <button class="coin-button" id="make-hawaiian" disabled>Приготовить</button>
            </div>
            
            <div class="pizza-recipe">
                <div class="pizza-recipe-title">Четыре сыра <span class="rank-badge">Уровень 5</span></div>
                <div class="pizza-recipe-ingredients">Ингредиенты: Тесто, Томатный соус, Сыр, Пармезан, Моцарелла, Дор Блю</div>
                <div class="pizza-recipe-price">Цена: 25 монет</div>
                <button class="coin-button" id="make-four-cheese" disabled>Приготовить</button>
            </div>
        </div>
        
        <div class="tab-content" id="ingredients-tab">
            <h2>Магазин ингредиентов</h2>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Тесто (5 шт)</div>
                    <div class="ingredient-item-desc">Основа для пиццы</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-dough" class="coin-button">
                        Купить (5🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Томатный соус (3 шт)</div>
                    <div class="ingredient-item-desc">Основа для пиццы</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-tomato" class="coin-button">
                        Купить (6🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Сыр (2 шт)</div>
                    <div class="ingredient-item-desc">Обязательный ингредиент</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-cheese" class="coin-button">
                        Купить (8🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Пепперони (1 шт)</div>
                    <div class="ingredient-item-desc">Для пиццы Пепперони</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-pepperoni" class="coin-button" disabled>
                        Купить (10🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Грибы (1 шт)</div>
                    <div class="ingredient-item-desc">Для грибной пиццы</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-mushroom" class="coin-button" disabled>
                        Купить (12🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Ветчина (1 шт)</div>
                    <div class="ingredient-item-desc">Для гавайской пиццы</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-ham" class="coin-button" disabled>
                        Купить (15🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Ананас (1 шт)</div>
                    <div class="ingredient-item-desc">Для гавайской пиццы</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-pineapple" class="coin-button" disabled>
                        Купить (15🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Пармезан (1 шт)</div>
                    <div class="ingredient-item-desc">Для пиццы Четыре сыра</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-parmesan" class="coin-button" disabled>
                        Купить (20🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Моцарелла (1 шт)</div>
                    <div class="ingredient-item-desc">Для пиццы Четыре сыра</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-mozzarella" class="coin-button" disabled>
                        Купить (20🪙)
                    </button>
                </div>
            </div>
            
            <div class="ingredient-item">
                <div class="ingredient-item-info">
                    <div class="ingredient-item-title">Дор Блю (1 шт)</div>
                    <div class="ingredient-item-desc">Для пиццы Четыре сыра</div>
                </div>
                <div class="ingredient-item-quantity">
                    <button id="buy-dorblue" class="coin-button" disabled>
                        Купить (25🪙)
                    </button>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="upgrades-tab">
            <h2>Улучшения</h2>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>⏱️ Ускоренная печь</span>
                    <span>50🪙</span>
                </div>
                <div class="upgrade-desc">Уменьшает время приготовления пиццы на 25%</div>
                <button id="buy-fast-oven" class="coin-button">Купить</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>👨‍🍳 Повар</span>
                    <span>150🪙</span>
                </div>
                <div class="upgrade-desc">Автоматически готовит пиццу (макс. 5 поваров)</div>
                <button id="buy-chef" class="coin-button">Купить (<span id="chef-count">0</span>/5)</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>🌟 Золотая пицца</span>
                    <span>200🪙</span>
                </div>
                <div class="upgrade-desc">Увеличивает шанс золотой пиццы до 15% (+10 монет)</div>
                <button id="buy-golden-pizza" class="coin-button">Купить</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>🔪 Острый нож</span>
                    <span>300🪙</span>
                </div>
                <div class="upgrade-desc">Уменьшает время приготовления еще на 35%</div>
                <button id="buy-sharp-knife" class="coin-button">Купить</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>🍽️ Официант</span>
                    <span>500🪙</span>
                </div>
                <div class="upgrade-desc">Автоматически подает готовую пиццу клиентам</div>
                <button id="buy-waiter" class="coin-button">Купить</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>📢 Реклама</span>
                    <span>750🪙</span>
                </div>
                <div class="upgrade-desc">Увеличивает количество клиентов на 50%</div>
                <button id="buy-advertising" class="coin-button">Купить</button>
            </div>
            
            <div class="upgrade">
                <div class="upgrade-title">
                    <span>🏆 VIP-клиенты</span>
                    <span>1000🪙</span>
                </div>
                <div class="upgrade-desc">VIP-клиенты оставляют больше чаевых</div>
                <button id="buy-vip" class="coin-button">Купить</button>
            </div>
        </div>
        
        <div class="tab-content" id="achievements-tab">
            <h2>Достижения</h2>
            
            <div id="achievements-list">
                <!-- Достижения будут добавлены через JavaScript -->
            </div>
        </div>
        
        <div class="tab-content" id="wheel-tab">
            <h2>Колесо фортуны</h2>
            <p>Крутите колесо за 1 токен и выигрывайте деньги!</p>
            
            <div class="wheel-container">
                <div class="wheel" id="wheel">
                    <!-- Секции колеса будут добавлены через JavaScript -->
                </div>
                <div class="wheel-arrow"></div>
            </div>
            
            <button class="wheel-button" id="spin-wheel" disabled>
                <span>🔶</span> Крутить колесо (1 токен)
            </button>
            
            <div class="wheel-info">
                <p>Возможные призы: $0.10, $0.20, $0.50</p>
                <p>Ваш баланс токенов: <span id="wheel-token-count">0</span> 🔶</p>
            </div>
        </div>
        
        <div class="tab-content" id="withdraw-tab">
            <h2>Вывод средств</h2>
            
            <div class="withdraw-info">
                <p>Для вывода средств:</p>
                <ol>
                    <li>Укажите ваш Telegram username</li>
                    <li>Нажмите кнопку "Вывести"</li>
                </ol>
                <p>Администратор свяжется с вами для выплаты в течение 24 часов.</p>
                <p><strong>Минимальная сумма вывода: $0.10</strong></p>
                <p><strong>Максимальная сумма вывода: $0.50</strong></p>
                <p><strong>Вывод можно делать только 1 раз в час</strong></p>
            </div>
            
            <div class="money-item">
                <div>
                    <strong>Ваш баланс:</strong> $<span id="withdraw-money-count">0.00</span>
                </div>
            </div>
            
            <div class="withdraw-form">
                <div class="form-group">
                    <label for="telegram-username">Telegram username (без @)</label>
                    <input type="text" id="telegram-username" placeholder="ваш_username">
                </div>
                
                <div class="form-group">
                    <label for="withdraw-amount">Сумма к выводу (от $0.10 до $0.50)</label>
                    <input type="number" id="withdraw-amount" min="0.10" max="0.50" step="0.01" value="0.10">
                </div>
                
                <button id="withdraw-button" class="money-button" disabled>
                    Вывести $<span id="withdraw-amount-value">0.10</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Кнопка для ввода промокодов -->
    <div class="promo-tab" id="promo-tab">Промокод</div>
    
    <!-- Модальное окно для ввода промокодов -->
    <div class="promo-modal" id="promo-modal">
        <div class="promo-content">
            <button class="promo-close" id="promo-close">✕</button>
            <h3>Активировать промокод</h3>
            <p>Введите промокод для получения бонусов</p>
            <input type="text" class="promo-input" id="promo-input" placeholder="Введите промокод">
            <button class="promo-button" id="promo-activate">Активировать</button>
            <div class="promo-info">
                Пример промокода: PIZZA1
            </div>
        </div>
    </div>
    
    <!-- Модальное окно ежедневного бонуса -->
    <div class="daily-bonus" id="daily-bonus">
        <div class="daily-bonus-content">
            <div class="daily-bonus-title">🎁 Ежедневный бонус!</div>
            <div class="daily-bonus-reward" id="daily-bonus-reward">Получите 50 монет за вход сегодня!</div>
            <button class="daily-bonus-button" id="daily-bonus-button">Получить награду</button>
        </div>
    </div>
    
    <!-- Модальное окно рекламы -->
    <div class="ad-modal" id="ad-modal">
        <div class="ad-content">
            <button class="ad-close" id="ad-close" disabled>✕</button>
            <div class="ad-text">
                🔧 Loxeru Soft — твой портал в мир софта!<br>
                📲 Уникальные программы, твики и сборки для всех<br>
                🛡 Безопасность, скорость и стабильность — гарантируем<br>
                📥 Новинки каждую неделю, без лишней воды<br>
                🔥 Подписывайся и открывай новый уровень использования!<br><br>
                
                Ссылка на канал: <a href="https://t.me/+yMTzSXcIUpJjNWYy" target="_blank">https://t.me/+yMTzSXcIUpJjNWYy</a>
            </div>
            <div class="ad-timer" id="ad-timer">Закроется через 5 секунд</div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <div id="notification-text"></div>
        <div class="progress-bar">
            <div class="progress" id="notification-progress"></div>
        </div>
    </div>
    
    <div class="notification coin-notification" id="coin-notification">
        <div id="coin-notification-text"></div>
        <div class="progress-bar">
            <div class="progress" id="coin-notification-progress"></div>
        </div>
    </div>
    
    <div class="notification token-notification" id="token-notification">
        <div id="token-notification-text"></div>
        <div class="progress-bar">
            <div class="progress" id="token-notification-progress"></div>
        </div>
    </div>
    
    <div class="notification money-notification" id="money-notification">
        <div id="money-notification-text"></div>
        <div class="progress-bar">
            <div class="progress" id="money-notification-progress"></div>
        </div>
    </div>
    
    <div class="notification customer-notification" id="customer-notification">
        <div id="customer-notification-text"></div>
        <div class="progress-bar">
            <div class="progress" id="customer-notification-progress"></div>
        </div>
    </div>
    
    <script>
        // Игровые переменные
        const gameState = {
            dough: 5,
            tomato: 5,
            cheese: 5,
            pepperoni: 0,
            mushroom: 0,
            ham: 0,
            pineapple: 0,
            parmesan: 0,
            mozzarella: 0,
            dorblue: 0,
            coins: 0,
            tokens: 0,
            money: 0,
            experience: 0,
            level: 1,
            tokenCost: 5000,
            baseCookingTime: 180000, // 3 минуты
            cookingTime: 180000,
            pizzaValue: 10,
            ingredientCost: {
                dough: 5,
                tomato: 6,
                cheese: 8,
                pepperoni: 10,
                mushroom: 12,
                ham: 15,
                pineapple: 15,
                parmesan: 20,
                mozzarella: 20,
                dorblue: 25
            },
            ingredientPackSize: {
                dough: 5,
                tomato: 3,
                cheese: 2,
                pepperoni: 1,
                mushroom: 1,
                ham: 1,
                pineapple: 1,
                parmesan: 1,
                mozzarella: 1,
                dorblue: 1
            },
            goldenChance: 0.05,
            goldenBonus: 10, // +10 монет за золотую пиццу
            chefs: 0,
            hasWaiter: false,
            hasAdvertising: false,
            hasVIP: false,
            upgrades: {
                fastOven: false,
                goldenPizza: false,
                sharpKnife: false,
                waiter: false,
                advertising: false,
                vip: false
            },
            ovens: Array(15).fill().map(() => ({
                hasPizza: false,
                pizzaType: null,
                startedAt: 0,
                isGolden: false,
                orderId: null
            })),
            pizzasCooked: 0,
            pizzasServed: 0,
            customersServed: 0,
            wheelPrizes: [0.10, 0.20, 0.50],
            unlockedRecipes: ['margherita'],
            unlockedIngredients: ['dough', 'tomato', 'cheese'],
            activeOrders: [],
            nextOrderId: 1,
            customerArrivalInterval: 30000, // 30 секунд
            lastCustomerTime: 0,
            lastDailyBonus: 0,
            lastWithdrawTime: 0,
            usedPromoCodes: [],
            achievements: {
                firstPizza: { unlocked: false, progress: 0, target: 1, reward: 50 },
                tenPizzas: { unlocked: false, progress: 0, target: 10, reward: 100 },
                fiftyPizzas: { unlocked: false, progress: 0, target: 50, reward: 150 },
                hundredPizzas: { unlocked: false, progress: 0, target: 100, reward: 200 },
                goldenPizza: { unlocked: false, progress: 0, target: 1, reward: 50 },
                fiveGoldenPizzas: { unlocked: false, progress: 0, target: 5, reward: 100 },
                firstWithdraw: { unlocked: false, progress: 0, target: 1, reward: 50 },
                level5: { unlocked: false, progress: 0, target: 5, reward: 100 },
                level10: { unlocked: false, progress: 0, target: 10, reward: 150 },
                allRecipes: { unlocked: false, progress: 0, target: 5, reward: 100 },
                dailyBonus: { unlocked: false, progress: 0, target: 1, reward: 50 },
                masterChef: { unlocked: false, progress: 0, target: 20, reward: 100 }
            }
        };
        
        // Промокоды
        const PROMO_CODES = {
            "PIZZA1": { 
                type: "coins", 
                value: 150, 
                message: "Промокод активирован! Получено 150 монет 🪙" 
            },
            "GOLDEN": { 
                type: "golden", 
                value: 1, 
                message: "Промокод активирован! Получена 1 золотая пицца 🌟" 
            },
            "TOKEN": { 
                type: "tokens", 
                value: 3, 
                message: "Промокод активирован! Получено 3 токена 🔶" 
            },
            "BONUS50": {
                type: "coins",
                value: 50,
                message: "Промокод активирован! Получено 50 монет 🪙"
            }
        };
        
        // Рецепты пицц
        const PIZZA_RECIPES = {
            margherita: {
                name: "Маргарита",
                level: 1,
                ingredients: {
                    dough: 1,
                    tomato: 1,
                    cheese: 1
                },
                reward: 10,
                money: 0.00,
                xp: 5
            },
            pepperoni: {
                name: "Пепперони",
                level: 2,
                ingredients: {
                    dough: 1,
                    tomato: 1,
                    cheese: 1,
                    pepperoni: 1
                },
                reward: 15,
                money: 0.00,
                xp: 8
            },
            mushroom: {
                name: "Грибная",
                level: 3,
                ingredients: {
                    dough: 1,
                    tomato: 1,
                    cheese: 1,
                    mushroom: 1
                },
                reward: 18,
                money: 0.00,
                xp: 10
            },
            hawaiian: {
                name: "Гавайская",
                level: 4,
                ingredients: {
                    dough: 1,
                    tomato: 1,
                    cheese: 1,
                    ham: 1,
                    pineapple: 1
                },
                reward: 20,
                money: 0.00,
                xp: 12
            },
            fourCheese: {
                name: "Четыре сыра",
                level: 5,
                ingredients: {
                    dough: 1,
                    tomato: 1,
                    cheese: 1,
                    parmesan: 1,
                    mozzarella: 1,
                    dorblue: 1
                },
                reward: 25,
                money: 0.00,
                xp: 15
            }
        };
        
        // Имена клиентов
        const CUSTOMER_NAMES = [
            "Алексей", "Мария", "Иван", "Елена", "Дмитрий", 
            "Анна", "Сергей", "Ольга", "Андрей", "Наталья",
            "Михаил", "Татьяна", "Александр", "Екатерина", "Артем"
        ];
        
        // Элементы DOM
        const elements = {
            doughCount: document.getElementById('dough-count'),
            tomatoCount: document.getElementById('tomato-count'),
            cheeseCount: document.getElementById('cheese-count'),
            coinCount: document.getElementById('coin-count'),
            tokenCount: document.getElementById('token-count'),
            moneyCount: document.getElementById('money-count'),
            pizzaKitchen: document.getElementById('pizza-kitchen'),
            buyTokenBtn: document.getElementById('buy-token'),
            tokenCost: document.getElementById('token-cost'),
            withdrawMoneyCount: document.getElementById('withdraw-money-count'),
            telegramUsername: document.getElementById('telegram-username'),
            withdrawAmount: document.getElementById('withdraw-amount'),
            withdrawButton: document.getElementById('withdraw-button'),
            withdrawAmountValue: document.getElementById('withdraw-amount-value'),
            tabs: document.querySelectorAll('.tab'),
            tabContents: document.querySelectorAll('.tab-content'),
            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notification-text'),
            notificationProgress: document.getElementById('notification-progress'),
            coinNotification: document.getElementById('coin-notification'),
            coinNotificationText: document.getElementById('coin-notification-text'),
            coinNotificationProgress: document.getElementById('coin-notification-progress'),
            tokenNotification: document.getElementById('token-notification'),
            tokenNotificationText: document.getElementById('token-notification-text'),
            tokenNotificationProgress: document.getElementById('token-notification-progress'),
            moneyNotification: document.getElementById('money-notification'),
            moneyNotificationText: document.getElementById('money-notification-text'),
            moneyNotificationProgress: document.getElementById('money-notification-progress'),
            customerNotification: document.getElementById('customer-notification'),
            customerNotificationText: document.getElementById('customer-notification-text'),
            customerNotificationProgress: document.getElementById('customer-notification-progress'),
            buyFastOvenBtn: document.getElementById('buy-fast-oven'),
            buyChefBtn: document.getElementById('buy-chef'),
            buyGoldenPizzaBtn: document.getElementById('buy-golden-pizza'),
            buySharpKnifeBtn: document.getElementById('buy-sharp-knife'),
            buyWaiterBtn: document.getElementById('buy-waiter'),
            buyAdvertisingBtn: document.getElementById('buy-advertising'),
            buyVIPBtn: document.getElementById('buy-vip'),
            chefCount: document.getElementById('chef-count'),
            makePizzaBtn: document.getElementById('make-pizza'),
            buyDoughBtn: document.getElementById('buy-dough'),
            buyTomatoBtn: document.getElementById('buy-tomato'),
            buyCheeseBtn: document.getElementById('buy-cheese'),
            buyPepperoniBtn: document.getElementById('buy-pepperoni'),
            buyMushroomBtn: document.getElementById('buy-mushroom'),
            buyHamBtn: document.getElementById('buy-ham'),
            buyPineappleBtn: document.getElementById('buy-pineapple'),
            buyParmesanBtn: document.getElementById('buy-parmesan'),
            buyMozzarellaBtn: document.getElementById('buy-mozzarella'),
            buyDorblueBtn: document.getElementById('buy-dorblue'),
            makeMargheritaBtn: document.getElementById('make-margherita'),
            makePepperoniBtn: document.getElementById('make-pepperoni'),
            makeMushroomBtn: document.getElementById('make-mushroom'),
            makeHawaiianBtn: document.getElementById('make-hawaiian'),
            makeFourCheeseBtn: document.getElementById('make-four-cheese'),
            promoTab: document.getElementById('promo-tab'),
            promoModal: document.getElementById('promo-modal'),
            promoClose: document.getElementById('promo-close'),
            promoInput: document.getElementById('promo-input'),
            promoActivate: document.getElementById('promo-activate'),
            wheel: document.getElementById('wheel'),
            spinWheelBtn: document.getElementById('spin-wheel'),
            wheelTokenCount: document.getElementById('wheel-token-count'),
            activeOrders: document.getElementById('active-orders'),
            achievementsList: document.getElementById('achievements-list'),
            callCustomerBtn: document.getElementById('call-customer'),
            levelProgress: document.getElementById('level-progress'),
            levelText: document.getElementById('level-text'),
            dailyBonus: document.getElementById('daily-bonus'),
            dailyBonusButton: document.getElementById('daily-bonus-button'),
            dailyBonusReward: document.getElementById('daily-bonus-reward'),
            adModal: document.getElementById('ad-modal'),
            adClose: document.getElementById('ad-close'),
            adTimer: document.getElementById('ad-timer')
        };
        
        // Инициализация игры
        function initGame() {
            // Загрузка сохраненной игры
            loadGame();
            
            // Создание печей
            renderKitchen();
            
            // Создание колеса фортуны
            createWheel();
            
            // Создание достижений
            renderAchievements();
            
            // Обновление статистики
            updateStats();
            
            // Запуск игрового цикла
            setInterval(gameLoop, 1000);
            
            // Проверка ежедневного бонуса
            checkDailyBonus();
            
            // Показ приветственного сообщения
            showNotification('Добро пожаловать в пиццерию! Принимайте заказы и готовьте пиццы!');
            
            // Начальное появление клиентов
            setTimeout(generateCustomer, 5000);
            
            // Запуск рекламного таймера
            setTimeout(showAd, 20000);
        }
        
        // Показать рекламу
        function showAd() {
            elements.adModal.classList.add('active');
            elements.adClose.disabled = true;
            
            let secondsLeft = 5;
            elements.adTimer.textContent = `Закроется через ${secondsLeft} секунд`;
            
            const timer = setInterval(() => {
                secondsLeft--;
                elements.adTimer.textContent = `Закроется через ${secondsLeft} секунд`;
                
                if (secondsLeft <= 0) {
                    clearInterval(timer);
                    elements.adClose.disabled = false;
                }
            }, 1000);
            
            // Запуск таймера для следующего показа рекламы
            setTimeout(showAd, 60000); // Показывать каждую минуту
        }
        
        // Закрыть рекламу
        function closeAd() {
            elements.adModal.classList.remove('active');
        }
        
        // Игровой цикл
        function gameLoop() {
            updateOvens();
            chefWork();
            waiterWork();
            checkCustomerArrival();
            checkAchievements();
            saveGame();
        }
        
        // Проверка ежедневного бонуса
        function checkDailyBonus() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
            
            if (gameState.lastDailyBonus < today) {
                const bonusAmount = 50 + Math.floor(Math.random() * 50); // 50-100 монет
                elements.dailyBonusReward.textContent = `Получите ${bonusAmount} монет за вход сегодня!`;
                
                // Сохраняем бонус в gameState для последующего начисления
                gameState.dailyBonusAmount = bonusAmount;
                
                elements.dailyBonus.classList.add('active');
            }
        }
        
        // Получение ежедневного бонуса
        function claimDailyBonus() {
            gameState.coins += gameState.dailyBonusAmount;
            gameState.lastDailyBonus = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate()).getTime();
            
            showCoinNotification(`Получен ежедневный бонус: ${gameState.dailyBonusAmount} монет!`, 3000);
            elements.dailyBonus.classList.remove('active');
            
            // Обновляем достижение
            gameState.achievements.dailyBonus.progress = 1;
            
            updateStats();
            saveGame();
        }
        
        // Проверка появления новых клиентов
        function checkCustomerArrival() {
            const now = Date.now();
            const interval = gameState.hasAdvertising ? 
                gameState.customerArrivalInterval * 0.66 : gameState.customerArrivalInterval;
            
            if (now - gameState.lastCustomerTime >= interval) {
                generateCustomer();
                gameState.lastCustomerTime = now;
            }
        }
        
        // Генерация клиента
        function generateCustomer() {
            if (gameState.activeOrders.length >= 5) return; // Максимум 5 активных заказов
            
            const customerName = CUSTOMER_NAMES[Math.floor(Math.random() * CUSTOMER_NAMES.length)];
            const availableRecipes = Object.keys(PIZZA_RECIPES)
                .filter(recipe => gameState.unlockedRecipes.includes(recipe));
            
            if (availableRecipes.length === 0) return;
            
            const randomRecipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
            const recipe = PIZZA_RECIPES[randomRecipe];
            
            const isVIP = gameState.hasVIP && Math.random() < 0.3;
            const rewardMultiplier = isVIP ? 1.5 : 1;
            
            const order = {
                id: gameState.nextOrderId++,
                customer: customerName,
                recipe: randomRecipe,
                status: 'waiting',
                createdAt: Date.now(),
                reward: Math.floor(recipe.reward * rewardMultiplier),
                money: recipe.money * rewardMultiplier,
                xp: recipe.xp,
                isVIP: isVIP
            };
            
            gameState.activeOrders.push(order);
            renderActiveOrders();
            
            showCustomerNotification(`${order.customer} заказал(а) пиццу "${recipe.name}"! Награда: ${order.reward} монет`, 3000);
        }
        
        // Пригласить клиентов вручную
        function callCustomers() {
            for (let i = 0; i < 3; i++) {
                generateCustomer();
            }
            showNotification('Вы пригласили клиентов!', 2000);
        }
        
        // Работа поваров
        function chefWork() {
            if (gameState.chefs > 0) {
                const emptyOvens = gameState.ovens.filter(o => !o.hasPizza);
                if (emptyOvens.length > 0) {
                    for (let i = 0; i < Math.min(gameState.chefs, emptyOvens.length); i++) {
                        const randomIndex = Math.floor(Math.random() * emptyOvens.length);
                        const ovenIndex = gameState.ovens.indexOf(emptyOvens[randomIndex]);
                        
                        // Повара выбирают самый простой доступный рецепт
                        const availableRecipes = Object.keys(PIZZA_RECIPES)
                            .filter(recipe => gameState.unlockedRecipes.includes(recipe))
                            .sort((a, b) => PIZZA_RECIPES[a].level - PIZZA_RECIPES[b].level);
                        
                        if (availableRecipes.length > 0) {
                            const recipe = availableRecipes[0];
                            if (hasIngredientsForRecipe(recipe)) {
                                makePizza(ovenIndex, recipe);
                            }
                        }
                    }
                }
            }
        }
        
        // Проверка наличия ингредиентов для рецепта
        function hasIngredientsForRecipe(recipe) {
            const ingredients = PIZZA_RECIPES[recipe].ingredients;
            for (const [ingredient, amount] of Object.entries(ingredients)) {
                if (gameState[ingredient] < amount) return false;
            }
            return true;
        }
        
        // Работа официантов
        function waiterWork() {
            if (gameState.hasWaiter) {
                gameState.ovens.forEach((oven, index) => {
                    if (oven.hasPizza && Date.now() - oven.startedAt >= gameState.cookingTime) {
                        servePizza(index);
                    }
                });
            }
        }
        
        // Обновление состояния печей
        function updateOvens() {
            const now = Date.now();
            
            gameState.ovens.forEach((oven, index) => {
                if (oven.hasPizza) {
                    const ovenEl = document.querySelector(`.oven[data-index="${index}"]`);
                    if (ovenEl) {
                        const progressEl = ovenEl.querySelector('.cooking-progress');
                        if (progressEl) {
                            const progress = Math.min(1, (now - oven.startedAt) / gameState.cookingTime);
                            progressEl.style.width = `${progress * 100}%`;
                        }
                    }
                }
            });
        }
        
        // Рендер кухни
        function renderKitchen() {
            elements.pizzaKitchen.innerHTML = '';
            
            gameState.ovens.forEach((oven, index) => {
                const ovenEl = document.createElement('div');
                ovenEl.className = `oven ${oven.hasPizza ? '' : 'empty'}`;
                ovenEl.dataset.index = index;
                
                if (oven.hasPizza) {
                    const progress = Math.min(1, (Date.now() - oven.startedAt) / gameState.cookingTime);
                    
                    let pizzaClass = oven.isGolden ? 'golden' : '';
                    let pizzaElement = '<div class="pizza ' + pizzaClass + '"></div>';
                    
                    // Добавляем топпинги в зависимости от типа пиццы
                    switch(oven.pizzaType) {
                        case 'pepperoni':
                            pizzaElement += '<div class="pepperoni-topping" style="top: 20px; left: 20px;"></div>';
                            pizzaElement += '<div class="pepperoni-topping" style="top: 40px; left: 40px;"></div>';
                            pizzaElement += '<div class="pepperoni-topping" style="top: 30px; left: 60px;"></div>';
                            break;
                        case 'mushroom':
                            pizzaElement += '<div class="mushroom-topping" style="top: 20px; left: 20px;"></div>';
                            pizzaElement += '<div class="mushroom-topping" style="top: 40px; left: 40px;"></div>';
                            pizzaElement += '<div class="mushroom-topping" style="top: 30px; left: 60px;"></div>';
                            break;
                        case 'hawaiian':
                            pizzaElement += '<div class="ham-topping" style="top: 20px; left: 20px;"></div>';
                            pizzaElement += '<div class="pineapple-topping" style="top: 40px; left: 40px;"></div>';
                            pizzaElement += '<div class="ham-topping" style="top: 30px; left: 60px;"></div>';
                            break;
                        case 'fourCheese':
                            pizzaElement += '<div class="cheese-topping" style="top: 20px; left: 20px;"></div>';
                            pizzaElement += '<div class="cheese-topping" style="top: 40px; left: 40px;"></div>';
                            pizzaElement += '<div class="cheese-topping" style="top: 30px; left: 60px;"></div>';
                            break;
                    }
                    
                    ovenEl.innerHTML = `
                        ${pizzaElement}
                        <div class="cooking-progress" style="width: ${progress * 100}%"></div>
                    `;
                }
                
                ovenEl.addEventListener('click', () => handleOvenClick(index));
                elements.pizzaKitchen.appendChild(ovenEl);
            });
        }
        
        // Рендер активных заказов
        function renderActiveOrders() {
            elements.activeOrders.innerHTML = '';
            
            if (gameState.activeOrders.length === 0) {
                elements.activeOrders.innerHTML = '<p>Нет активных заказов. Клиенты скоро появятся!</p>';
                return;
            }
            
            gameState.activeOrders.forEach(order => {
                const recipe = PIZZA_RECIPES[order.recipe];
                const orderEl = document.createElement('div');
                orderEl.className = 'customer-order';
                
                const statusText = order.status === 'waiting' ? 'Ожидает' : 'Готовится';
                const statusClass = order.status === 'waiting' ? 'status-waiting' : 'status-cooking';
                
                orderEl.innerHTML = `
                    <div class="customer-order-title">
                        <span>${order.customer} ${order.isVIP ? '🌟' : ''}</span>
                        <span class="customer-order-reward">+${order.reward}🪙</span>
                    </div>
                    <div class="customer-order-time">Заказ #${order.id}</div>
                    <div class="customer-order-ingredients">Пицца "${recipe.name}": ${Object.keys(recipe.ingredients).map(ing => getIngredientName(ing)).join(', ')}</div>
                    <div class="customer-order-status">${statusText}</div>
                    ${order.status === 'waiting' ? `<button class="customer-button take-order-btn" data-order-id="${order.id}">Принять заказ</button>` : ''}
                `;
                
                elements.activeOrders.appendChild(orderEl);
            });
            
            // Добавляем обработчики для кнопок принятия заказов
            document.querySelectorAll('.take-order-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const orderId = parseInt(e.target.dataset.orderId);
                    takeOrder(orderId);
                });
            });
        }
        
        // Принять заказ
        function takeOrder(orderId) {
            const orderIndex = gameState.activeOrders.findIndex(o => o.id === orderId);
            if (orderIndex === -1) return;
            
            const order = gameState.activeOrders[orderIndex];
            const recipe = PIZZA_RECIPES[order.recipe];
            
            // Проверяем наличие ингредиентов
            for (const [ingredient, amount] of Object.entries(recipe.ingredients)) {
                if (gameState[ingredient] < amount) {
                    showNotification(`Не хватает ${getIngredientName(ingredient)} для приготовления пиццы!`);
                    return;
                }
            }
            
            // Находим свободную печь
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex === -1) {
                showNotification('Нет свободных печей для приготовления пиццы!');
                return;
            }
            
            // Используем ингредиенты
            for (const [ingredient, amount] of Object.entries(recipe.ingredients)) {
                gameState[ingredient] -= amount;
            }
            
            // Обновляем статус заказа
            gameState.activeOrders[orderIndex].status = 'cooking';
            
            // Готовим пиццу
            makePizza(emptyOvenIndex, order.recipe, order.id);
            
            renderActiveOrders();
            updateStats();
            showNotification(`Вы начали готовить пиццу "${recipe.name}" для ${order.customer}!`);
        }
        
        // Приготовление пиццы
        function makePizza(index, pizzaType, orderId = null) {
            const isGolden = Math.random() < gameState.goldenChance;
            
            gameState.ovens[index] = {
                hasPizza: true,
                pizzaType: pizzaType,
                startedAt: Date.now(),
                isGolden: isGolden,
                orderId: orderId
            };
            
            gameState.pizzasCooked += 1;
            renderKitchen();
            updateStats();
            saveGame();
        }
        
        // Подача пиццы
        function servePizza(index) {
            const oven = gameState.ovens[index];
            const recipe = PIZZA_RECIPES[oven.pizzaType];
            let order = null;
            
            if (oven.orderId) {
                order = gameState.activeOrders.find(o => o.id === oven.orderId);
            }
            
            let coinsEarned = recipe.reward;
            let xpEarned = recipe.xp;
            
            // Бонус за золотую пиццу
            if (oven.isGolden) {
                coinsEarned += gameState.goldenBonus;
                showNotification('Подано! Вы приготовили золотую пиццу! 🌟 +10 монет', 3000);
                gameState.achievements.goldenPizza.progress += 1;
                gameState.achievements.fiveGoldenPizzas.progress += 1;
            } else {
                showNotification(`Подано! Вы приготовили пиццу ${recipe.name}!`, 2000);
            }
            
            // Если это заказ, добавляем бонусы
            if (order) {
                coinsEarned = order.reward + (oven.isGolden ? gameState.goldenBonus : 0);
                xpEarned = order.xp;
                
                // VIP-клиенты оставляют чаевые
                if (order.isVIP && gameState.hasVIP) {
                    const tip = Math.floor(coinsEarned * 0.3);
                    coinsEarned += tip;
                    showNotification(`VIP-клиент ${order.customer} оставил чаевые: ${tip} монет!`, 3000);
                }
                
                // Удаляем выполненный заказ
                gameState.activeOrders = gameState.activeOrders.filter(o => o.id !== order.id);
                gameState.customersServed += 1;
            }
            
            gameState.coins += coinsEarned;
            addExperience(xpEarned);
            gameState.ovens[index].hasPizza = false;
            gameState.pizzasServed += 1;
            
            const ovenEl = document.querySelector(`.oven[data-index="${index}"]`);
            if (ovenEl) {
                ovenEl.classList.add('bounce');
                setTimeout(() => ovenEl.classList.remove('bounce'), 500);
            }
            
            renderKitchen();
            renderActiveOrders();
            updateStats();
            
            showCoinNotification(`Пицца подана! Заработано ${coinsEarned} монет!`, 2000);
            
            if (order) {
                showCustomerNotification(`${order.customer} доволен(а) вашей пиццей!`, 2000);
            }
            
            // Обновляем достижение "Мастер-повар"
            gameState.achievements.masterChef.progress += 1;
        }
        
        // Добавление опыта
        function addExperience(amount) {
            gameState.experience += amount;
            
            const expNeeded = getExpForLevel(gameState.level);
            if (gameState.experience >= expNeeded) {
                levelUp();
            }
            
            updateLevelBar();
        }
        
        // Повышение уровня
        function levelUp() {
            gameState.level += 1;
            gameState.experience = 0;
            
            // Разблокировка новых рецептов и ингредиентов
            unlockContentByLevel();
            
            showNotification(`Поздравляем! Вы достигли ${gameState.level} уровня!`, 3000);
            updateLevelBar();
        }
        
        // Разблокировка контента по уровню
        function unlockContentByLevel() {
            // Рецепты
            if (gameState.level >= 2 && !gameState.unlockedRecipes.includes('pepperoni')) {
                gameState.unlockedRecipes.push('pepperoni');
                showNotification('Открыт новый рецепт: Пепперони!', 3000);
            }
            if (gameState.level >= 3 && !gameState.unlockedRecipes.includes('mushroom')) {
                gameState.unlockedRecipes.push('mushroom');
                showNotification('Открыт новый рецепт: Грибная!', 3000);
            }
            if (gameState.level >= 4 && !gameState.unlockedRecipes.includes('hawaiian')) {
                gameState.unlockedRecipes.push('hawaiian');
                showNotification('Открыт новый рецепт: Гавайская!', 3000);
            }
            if (gameState.level >= 5 && !gameState.unlockedRecipes.includes('fourCheese')) {
                gameState.unlockedRecipes.push('fourCheese');
                showNotification('Открыт новый рецепт: Четыре сыра!', 3000);
            }
            
            // Ингредиенты
            if (gameState.level >= 2 && !gameState.unlockedIngredients.includes('pepperoni')) {
                gameState.unlockedIngredients.push('pepperoni');
                showNotification('Открыт новый ингредиент: Пепперони!', 3000);
            }
            if (gameState.level >= 3 && !gameState.unlockedIngredients.includes('mushroom')) {
                gameState.unlockedIngredients.push('mushroom');
                showNotification('Открыт новый ингредиент: Грибы!', 3000);
            }
            if (gameState.level >= 4 && !gameState.unlockedIngredients.includes('ham')) {
                gameState.unlockedIngredients.push('ham');
                gameState.unlockedIngredients.push('pineapple');
                showNotification('Открыты новые ингредиенты: Ветчина и Ананас!', 3000);
            }
            if (gameState.level >= 5 && !gameState.unlockedIngredients.includes('parmesan')) {
                gameState.unlockedIngredients.push('parmesan');
                gameState.unlockedIngredients.push('mozzarella');
                gameState.unlockedIngredients.push('dorblue');
                showNotification('Открыты новые ингредиенты: Пармезан, Моцарелла и Дор Блю!', 3000);
            }
        }
        
        // Получение необходимого опыта для уровня
        function getExpForLevel(level) {
            return 100 * level * level;
        }
        
        // Обновление полоски уровня
        function updateLevelBar() {
            const expNeeded = getExpForLevel(gameState.level);
            const progress = (gameState.experience / expNeeded) * 100;
            
            elements.levelProgress.style.width = `${progress}%`;
            elements.levelText.textContent = `Уровень ${gameState.level}: ${gameState.experience}/${expNeeded}`;
        }
        
        // Обработка клика по печи
        function handleOvenClick(index) {
            const oven = gameState.ovens[index];
            const now = Date.now();
            
            if (oven.hasPizza) {
                if (now - oven.startedAt >= gameState.cookingTime) {
                    servePizza(index);
                } else {
                    showNotification('Пицца еще не готова! Подождите немного.');
                    const ovenEl = document.querySelector(`.oven[data-index="${index}"]`);
                    if (ovenEl) {
                        ovenEl.classList.add('shake');
                        setTimeout(() => ovenEl.classList.remove('shake'), 500);
                    }
                }
            } else {
                // Если печь пустая, показываем меню выбора рецепта
                selectPizzaForOven(index);
            }
        }
        
        // Выбор пиццы для приготовления
        function selectPizzaForOven(index) {
            const pizzaMenu = document.createElement('div');
            pizzaMenu.className = 'pizza-menu';
            pizzaMenu.style.position = 'fixed';
            pizzaMenu.style.top = '50%';
            pizzaMenu.style.left = '50%';
            pizzaMenu.style.transform = 'translate(-50%, -50%)';
            pizzaMenu.style.backgroundColor = 'white';
            pizzaMenu.style.padding = '20px';
            pizzaMenu.style.borderRadius = '10px';
            pizzaMenu.style.boxShadow = '0 5px 15px rgba(0,0,0,0.3)';
            pizzaMenu.style.zIndex = '1000';
            
            let buttonsHTML = '';
            
            gameState.unlockedRecipes.forEach(recipe => {
                const recipeData = PIZZA_RECIPES[recipe];
                const hasIngredients = Object.entries(recipeData.ingredients)
                    .every(([ingredient, amount]) => gameState[ingredient] >= amount);
                
                buttonsHTML += `
                    <button 
                        style="padding: 10px; border: none; border-radius: 5px; background: #E74C3C; color: white; cursor: pointer; margin-bottom: 5px; width: 100%;"
                        onclick="makePizza(${index}, '${recipe}'); document.body.removeChild(this.parentNode.parentNode.parentNode);"
                        ${hasIngredients ? '' : 'disabled'}
                    >
                        ${recipeData.name} (${Object.keys(recipeData.ingredients).map(ing => getIngredientName(ing)).join(', ')})
                    </button>
                `;
            });
            
            pizzaMenu.innerHTML = `
                <h3 style="margin-top: 0;">Выберите пиццу для приготовления</h3>
                <div style="display: grid; grid-template-columns: 1fr; gap: 5px;">
                    ${buttonsHTML}
                    <button 
                        style="grid-column: 1 / -1; padding: 10px; border: none; border-radius: 5px; background: #F44336; color: white; cursor: pointer; margin-top: 10px;"
                        onclick="document.body.removeChild(this.parentNode.parentNode)"
                    >
                        Отмена
                    </button>
                </div>
            `;
            
            document.body.appendChild(pizzaMenu);
        }
        
        // Покупка токена
        function buyToken() {
            if (gameState.coins >= gameState.tokenCost) {
                gameState.coins -= gameState.tokenCost;
                gameState.tokens += 1;
                
                updateStats();
                showTokenNotification('Токен куплен! Теперь вы можете крутить колесо фортуны.', 2000);
                saveGame();
            } else {
                showNotification('Недостаточно монет для покупки токена!', 2000);
            }
        }
        
        // Покупка ингредиентов
        function buyIngredient(type) {
            const cost = gameState.ingredientCost[type];
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState[type] += gameState.ingredientPackSize[type];
                
                updateStats();
                showCoinNotification(`Куплено ${gameState.ingredientPackSize[type]} ${getIngredientName(type)}!`, 2000);
                saveGame();
            } else {
                showNotification('Недостаточно монет для покупки ингредиентов!', 2000);
            }
        }
        
        // Получение названия ингредиента
        function getIngredientName(type) {
            switch(type) {
                case 'dough': return 'теста';
                case 'tomato': return 'томатного соуса';
                case 'cheese': return 'сыра';
                case 'pepperoni': return 'пепперони';
                case 'mushroom': return 'грибов';
                case 'ham': return 'ветчины';
                case 'pineapple': return 'ананаса';
                case 'parmesan': return 'пармезана';
                case 'mozzarella': return 'моцареллы';
                case 'dorblue': return 'дор блю';
                default: return type;
            }
        }
        
        // Покупка улучшения
        function buyUpgrade(upgrade) {
            let cost = 0;
            let canBuy = false;
            
            switch(upgrade) {
                case 'fastOven':
                    cost = 50;
                    if (gameState.coins >= cost && !gameState.upgrades.fastOven) {
                        gameState.coins -= cost;
                        gameState.cookingTime = gameState.baseCookingTime * 0.75;
                        gameState.upgrades.fastOven = true;
                        canBuy = true;
                    }
                    break;
                case 'chef':
                    cost = 150;
                    if (gameState.coins >= cost && gameState.chefs < 5) {
                        gameState.coins -= cost;
                        gameState.chefs += 1;
                        canBuy = true;
                    }
                    break;
                case 'goldenPizza':
                    cost = 200;
                    if (gameState.coins >= cost && !gameState.upgrades.goldenPizza) {
                        gameState.coins -= cost;
                        gameState.goldenChance = 0.15;
                        gameState.upgrades.goldenPizza = true;
                        canBuy = true;
                    }
                    break;
                case 'sharpKnife':
                    cost = 300;
                    if (gameState.coins >= cost && !gameState.upgrades.sharpKnife) {
                        gameState.coins -= cost;
                        gameState.cookingTime = gameState.baseCookingTime * 0.4;
                        gameState.upgrades.sharpKnife = true;
                        canBuy = true;
                    }
                    break;
                case 'waiter':
                    cost = 500;
                    if (gameState.coins >= cost && !gameState.upgrades.waiter) {
                        gameState.coins -= cost;
                        gameState.hasWaiter = true;
                        gameState.upgrades.waiter = true;
                        canBuy = true;
                    }
                    break;
                case 'advertising':
                    cost = 750;
                    if (gameState.coins >= cost && !gameState.upgrades.advertising) {
                        gameState.coins -= cost;
                        gameState.hasAdvertising = true;
                        gameState.upgrades.advertising = true;
                        canBuy = true;
                    }
                    break;
                case 'vip':
                    cost = 1000;
                    if (gameState.coins >= cost && !gameState.upgrades.vip) {
                        gameState.coins -= cost;
                        gameState.hasVIP = true;
                        gameState.upgrades.vip = true;
                        canBuy = true;
                    }
                    break;
            }
            
            if (canBuy) {
                updateStats();
                showCoinNotification('Улучшение куплено!', 2000);
                saveGame();
            } else {
                showNotification('Недостаточно монет или улучшение уже куплено!', 2000);
            }
        }
        
        // Вывод денег
        function withdrawMoney() {
            const username = elements.telegramUsername.value.trim();
            let amount = parseFloat(elements.withdrawAmount.value) || 0;
            
            // Проверяем, прошло ли достаточно времени с последнего вывода
            const now = Date.now();
            const timeSinceLastWithdraw = now - gameState.lastWithdrawTime;
            const oneHour = 3600000; // 1 час в миллисекундах
            
            if (timeSinceLastWithdraw < oneHour) {
                const timeLeft = Math.ceil((oneHour - timeSinceLastWithdraw) / 60000); // в минутах
                showNotification(`Вывод можно делать только 1 раз в час. Подождите еще ${timeLeft} минут.`, 3000);
                return;
            }
            
            // Ограничиваем сумму вывода до 0.50
            amount = Math.min(amount, 0.50);
            
            if (!username) {
                showNotification('Введите ваш Telegram username!', 2000);
                return;
            }
            
            if (amount < 0.10) {
                showNotification('Минимальная сумма вывода - $0.10!', 2000);
                return;
            }
            
            if (gameState.money < amount) {
                showNotification('Недостаточно средств для вывода!', 2000);
                return;
            }
            
            // Отправка уведомления в Telegram
            sendWithdrawNotification(username, amount);
            
            gameState.money -= amount;
            gameState.lastWithdrawTime = now;
            gameState.achievements.firstWithdraw.progress = 1;
            
            updateStats();
            showMoneyNotification(`Запрос на вывод $${amount.toFixed(2)} отправлен! Администратор свяжется с вами.`, 3000);
            saveGame();
        }
        
        // Отправка уведомления в Telegram
        async function sendWithdrawNotification(username, amount) {
            const botToken = '7513641967:AAFLUBuxsmatAyoNu_3-GT-wDs_sN9du_rY';
            const chatId = '6785759216';
            const message = `Новый запрос на вывод из Пиццерии PRO!\n\nUsername: @${username}\nСумма: $${amount.toFixed(2)}\n\nID: ${Date.now()}`;
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`);
                const data = await response.json();
                console.log('Уведомление отправлено в Telegram:', data);
            } catch (error) {
                console.error('Ошибка отправки уведомления:', error);
            }
        }
        
        // Создание колеса фортуны
        function createWheel() {
            elements.wheel.innerHTML = '';
            
            const prizeCount = gameState.wheelPrizes.length;
            const angle = 360 / prizeCount;
            
            gameState.wheelPrizes.forEach((prize, index) => {
                const section = document.createElement('div');
                section.className = 'wheel-section';
                section.style.transform = `rotate(${angle * index}deg)`;
                section.style.backgroundColor = getWheelColor(index);
                section.textContent = `$${prize.toFixed(2)}`;
                
                elements.wheel.appendChild(section);
            });
        }
        
        // Получение цвета для секции колеса
        function getWheelColor(index) {
            const colors = ['#E74C3C', '#3498DB', '#2ECC71'];
            return colors[index % colors.length];
        }
        
        // Вращение колеса
        function spinWheel() {
            if (gameState.tokens < 1) {
                showNotification('Недостаточно токенов для вращения колеса!', 2000);
                return;
            }
            
            gameState.tokens -= 1;
            updateStats();
            
            elements.spinWheelBtn.disabled = true;
            
            const prizeIndex = Math.floor(Math.random() * gameState.wheelPrizes.length);
            const prize = gameState.wheelPrizes[prizeIndex];
            const angle = 1800 + (360 / gameState.wheelPrizes.length) * prizeIndex;
            
            elements.wheel.style.transform = `rotate(${-angle}deg)`;
            
            setTimeout(() => {
                showMoneyNotification(`Вы выиграли $${prize.toFixed(2)}!`, 3000);
                elements.spinWheelBtn.disabled = false;
                
                gameState.money += prize;
                updateStats();
                saveGame();
            }, 4000);
        }
        
        // Активация промокода
        function activatePromoCode() {
            const promoCode = elements.promoInput.value.trim().toUpperCase();
            
            if (!promoCode) {
                showNotification('Введите промокод!', 2000);
                return;
            }
            
            // Проверяем, был ли уже использован этот промокод
            if (gameState.usedPromoCodes.includes(promoCode)) {
                showNotification('Этот промокод уже был использован!', 2000);
                return;
            }
            
            const promo = PROMO_CODES[promoCode];
            if (!promo) {
                showNotification('Неверный промокод!', 2000);
                return;
            }
            
            switch(promo.type) {
                case 'coins':
                    gameState.coins += promo.value;
                    showCoinNotification(promo.message, 3000);
                    break;
                case 'golden':
                    // Добавляем золотую пиццу в случайную печь
                    const emptyOvens = gameState.ovens.filter(o => !o.hasPizza);
                    if (emptyOvens.length > 0) {
                        const randomIndex = Math.floor(Math.random() * emptyOvens.length);
                        const ovenIndex = gameState.ovens.indexOf(emptyOvens[randomIndex]);
                        makePizza(ovenIndex, 'margherita');
                        gameState.ovens[ovenIndex].isGolden = true;
                        renderKitchen();
                    }
                    showCoinNotification(promo.message, 3000);
                    break;
                case 'tokens':
                    gameState.tokens += promo.value;
                    showTokenNotification(promo.message, 3000);
                    break;
            }
            
            // Добавляем промокод в список использованных
            gameState.usedPromoCodes.push(promoCode);
            
            closePromoModal();
            updateStats();
            saveGame();
        }
        
        // Рендер достижений
        function renderAchievements() {
            elements.achievementsList.innerHTML = '';
            
            Object.entries(gameState.achievements).forEach(([key, achievement]) => {
                const achievementEl = document.createElement('div');
                achievementEl.className = `achievement ${achievement.unlocked ? 'achievement-unlocked' : 'achievement-locked'}`;
                
                let icon = '🔒';
                let title = '';
                let desc = '';
                let reward = '';
                
                switch(key) {
                    case 'firstPizza':
                        icon = achievement.unlocked ? '🍕' : '🔒';
                        title = 'Первая пицца';
                        desc = 'Приготовьте свою первую пиццу';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'tenPizzas':
                        icon = achievement.unlocked ? '🍕' : '🔢';
                        title = '10 пицц';
                        desc = 'Приготовьте 10 пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'fiftyPizzas':
                        icon = achievement.unlocked ? '🍕' : '🔢';
                        title = '50 пицц';
                        desc = 'Приготовьте 50 пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'hundredPizzas':
                        icon = achievement.unlocked ? '🏆' : '🔢';
                        title = '100 пицц';
                        desc = 'Приготовьте 100 пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'goldenPizza':
                        icon = achievement.unlocked ? '🌟' : '⭐';
                        title = 'Золотая пицца';
                        desc = 'Приготовьте золотую пиццу';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'fiveGoldenPizzas':
                        icon = achievement.unlocked ? '🌟🌟🌟' : '⭐⭐⭐';
                        title = '5 золотых пицц';
                        desc = 'Приготовьте 5 золотых пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'firstWithdraw':
                        icon = achievement.unlocked ? '💵' : '💰';
                        title = 'Первый вывод';
                        desc = 'Выведите деньги впервые';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'level5':
                        icon = achievement.unlocked ? '📈' : '5️⃣';
                        title = '5 уровень';
                        desc = 'Достигните 5 уровня';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'level10':
                        icon = achievement.unlocked ? '📈' : '🔟';
                        title = '10 уровень';
                        desc = 'Достигните 10 уровня';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'allRecipes':
                        icon = achievement.unlocked ? '📜' : '🍽️';
                        title = 'Все рецепты';
                        desc = 'Откройте все рецепты пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'dailyBonus':
                        icon = achievement.unlocked ? '🎁' : '📅';
                        title = 'Ежедневный бонус';
                        desc = 'Получите ежедневный бонус';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                    case 'masterChef':
                        icon = achievement.unlocked ? '👨‍🍳' : '🍳';
                        title = 'Мастер-повар';
                        desc = 'Приготовьте 20 пицц';
                        reward = `Награда: ${achievement.reward} монет`;
                        break;
                }
                
                const progressPercent = (achievement.progress / achievement.target) * 100;
                
                achievementEl.innerHTML = `
                    <div class="achievement-icon">${icon}</div>
                    <div class="achievement-info">
                        <div class="achievement-title">${title}</div>
                        <div class="achievement-desc">${desc}</div>
                        <div class="achievement-progress">
                            <div class="achievement-progress-bar" style="width: ${progressPercent}%"></div>
                        </div>
                        <div class="achievement-reward">${reward}</div>
                    </div>
                `;
                
                elements.achievementsList.appendChild(achievementEl);
            });
        }
        
        // Проверка достижений
        function checkAchievements() {
            // Достижения по количеству пицц
            gameState.achievements.firstPizza.progress = gameState.pizzasCooked >= 1 ? 1 : 0;
            gameState.achievements.tenPizzas.progress = Math.min(gameState.pizzasCooked, 10);
            gameState.achievements.fiftyPizzas.progress = Math.min(gameState.pizzasCooked, 50);
            gameState.achievements.hundredPizzas.progress = Math.min(gameState.pizzasCooked, 100);
            
            // Достижения по уровню
            gameState.achievements.level5.progress = Math.min(gameState.level, 5);
            gameState.achievements.level10.progress = Math.min(gameState.level, 10);
            
            // Достижение "Все рецепты"
            gameState.achievements.allRecipes.progress = gameState.unlockedRecipes.length;
            
            // Проверяем, выполнены ли достижения
            Object.entries(gameState.achievements).forEach(([key, achievement]) => {
                if (!achievement.unlocked && achievement.progress >= achievement.target) {
                    achievement.unlocked = true;
                    unlockAchievement(key);
                }
            });
        }
        
        // Разблокировка достижения
        function unlockAchievement(key) {
            const achievement = gameState.achievements[key];
            
            gameState.coins += achievement.reward;
            
            showCoinNotification(`Достижение "${getAchievementName(key)}" разблокировано! Получено ${achievement.reward} монет.`, 3000);
            renderAchievements();
            updateStats();
            saveGame();
        }
        
        // Получение названия достижения
        function getAchievementName(key) {
            switch(key) {
                case 'firstPizza': return 'Первая пицца';
                case 'tenPizzas': return '10 пицц';
                case 'fiftyPizzas': return '50 пицц';
                case 'hundredPizzas': return '100 пицц';
                case 'goldenPizza': return 'Золотая пицца';
                case 'fiveGoldenPizzas': return '5 золотых пицц';
                case 'firstWithdraw': return 'Первый вывод';
                case 'level5': return '5 уровень';
                case 'level10': return '10 уровень';
                case 'allRecipes': return 'Все рецепты';
                case 'dailyBonus': return 'Ежедневный бонус';
                case 'masterChef': return 'Мастер-повар';
                default: return key;
            }
        }
        
        // Обновление статистики
        function updateStats() {
            elements.doughCount.textContent = gameState.dough;
            elements.tomatoCount.textContent = gameState.tomato;
            elements.cheeseCount.textContent = gameState.cheese;
            elements.coinCount.textContent = gameState.coins;
            elements.tokenCount.textContent = gameState.tokens;
            elements.moneyCount.textContent = `$${gameState.money.toFixed(2)}`;
            elements.withdrawMoneyCount.textContent = gameState.money.toFixed(2);
            elements.wheelTokenCount.textContent = gameState.tokens;
            
            // Обновление кнопки вывода
            elements.withdrawButton.disabled = gameState.money < 0.10;
            let amount = parseFloat(elements.withdrawAmount.value) || 0.10;
            amount = Math.min(amount, 0.50);
            elements.withdrawAmount.value = amount.toFixed(2);
            elements.withdrawAmountValue.textContent = amount.toFixed(2);
            
            // Обновление кнопки покупки токена
            elements.buyTokenBtn.disabled = gameState.coins < gameState.tokenCost;
            elements.tokenCost.textContent = gameState.tokenCost;
            
            // Обновление кнопки колеса фортуны
            elements.spinWheelBtn.disabled = gameState.tokens < 1;
            
            // Обновление кнопок улучшений
            elements.buyFastOvenBtn.disabled = gameState.coins < 50 || gameState.upgrades.fastOven;
            elements.buyChefBtn.disabled = gameState.coins < 150 || gameState.chefs >= 5;
            elements.buyGoldenPizzaBtn.disabled = gameState.coins < 200 || gameState.upgrades.goldenPizza;
            elements.buySharpKnifeBtn.disabled = gameState.coins < 300 || gameState.upgrades.sharpKnife;
            elements.buyWaiterBtn.disabled = gameState.coins < 500 || gameState.upgrades.waiter;
            elements.buyAdvertisingBtn.disabled = gameState.coins < 750 || gameState.upgrades.advertising;
            elements.buyVIPBtn.disabled = gameState.coins < 1000 || gameState.upgrades.vip;
            
            // Обновление кнопок покупки ингредиентов
            elements.buyDoughBtn.disabled = gameState.coins < gameState.ingredientCost.dough;
            elements.buyTomatoBtn.disabled = gameState.coins < gameState.ingredientCost.tomato;
            elements.buyCheeseBtn.disabled = gameState.coins < gameState.ingredientCost.cheese;
            elements.buyPepperoniBtn.disabled = gameState.coins < gameState.ingredientCost.pepperoni || !gameState.unlockedIngredients.includes('pepperoni');
            elements.buyMushroomBtn.disabled = gameState.coins < gameState.ingredientCost.mushroom || !gameState.unlockedIngredients.includes('mushroom');
            elements.buyHamBtn.disabled = gameState.coins < gameState.ingredientCost.ham || !gameState.unlockedIngredients.includes('ham');
            elements.buyPineappleBtn.disabled = gameState.coins < gameState.ingredientCost.pineapple || !gameState.unlockedIngredients.includes('pineapple');
            elements.buyParmesanBtn.disabled = gameState.coins < gameState.ingredientCost.parmesan || !gameState.unlockedIngredients.includes('parmesan');
            elements.buyMozzarellaBtn.disabled = gameState.coins < gameState.ingredientCost.mozzarella || !gameState.unlockedIngredients.includes('mozzarella');
            elements.buyDorblueBtn.disabled = gameState.coins < gameState.ingredientCost.dorblue || !gameState.unlockedIngredients.includes('dorblue');
            
            // Обновление кнопок рецептов
            elements.makeMargheritaBtn.disabled = gameState.dough <= 0 || gameState.tomato <= 0 || gameState.cheese <= 0;
            elements.makePepperoniBtn.disabled = gameState.dough <= 0 || gameState.tomato <= 0 || gameState.cheese <= 0 || gameState.pepperoni <= 0 || !gameState.unlockedRecipes.includes('pepperoni');
            elements.makeMushroomBtn.disabled = gameState.dough <= 0 || gameState.tomato <= 0 || gameState.cheese <= 0 || gameState.mushroom <= 0 || !gameState.unlockedRecipes.includes('mushroom');
            elements.makeHawaiianBtn.disabled = gameState.dough <= 0 || gameState.tomato <= 0 || gameState.cheese <= 0 || gameState.ham <= 0 || gameState.pineapple <= 0 || !gameState.unlockedRecipes.includes('hawaiian');
            elements.makeFourCheeseBtn.disabled = gameState.dough <= 0 || gameState.tomato <= 0 || gameState.cheese <= 0 || gameState.parmesan <= 0 || gameState.mozzarella <= 0 || gameState.dorblue <= 0 || !gameState.unlockedRecipes.includes('fourCheese');
            
            // Обновление текста кнопок улучшений
            elements.chefCount.textContent = gameState.chefs;
            
            if (gameState.upgrades.fastOven) {
                elements.buyFastOvenBtn.textContent = 'Куплено';
                elements.buyFastOvenBtn.disabled = true;
            }
            
            if (gameState.upgrades.goldenPizza) {
                elements.buyGoldenPizzaBtn.textContent = 'Куплено';
                elements.buyGoldenPizzaBtn.disabled = true;
            }
            
            if (gameState.upgrades.sharpKnife) {
                elements.buySharpKnifeBtn.textContent = 'Куплено';
                elements.buySharpKnifeBtn.disabled = true;
            }
            
            if (gameState.upgrades.waiter) {
                elements.buyWaiterBtn.textContent = 'Куплено';
                elements.buyWaiterBtn.disabled = true;
            }
            
            if (gameState.upgrades.advertising) {
                elements.buyAdvertisingBtn.textContent = 'Куплено';
                elements.buyAdvertisingBtn.disabled = true;
            }
            
            if (gameState.upgrades.vip) {
                elements.buyVIPBtn.textContent = 'Куплено';
                elements.buyVIPBtn.disabled = true;
            }
        }
        
        // Сохранение игры
        function saveGame() {
            localStorage.setItem('pizzeriaPro', JSON.stringify(gameState));
        }
        
        // Загрузка игры
        function loadGame() {
            const savedGame = localStorage.getItem('pizzeriaPro');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                Object.assign(gameState, parsed);
                
                // Восстанавливаем время приготовления с учетом улучшений
                gameState.cookingTime = gameState.baseCookingTime;
                if (gameState.upgrades.fastOven) gameState.cookingTime *= 0.75;
                if (gameState.upgrades.sharpKnife) gameState.cookingTime *= 0.4;
                
                showNotification('Игра загружена! Продолжайте готовить пиццы!');
            } else {
                gameState.dough = 5;
                gameState.tomato = 5;
                gameState.cheese = 5;
            }
            
            updateLevelBar();
        }
        
        // Показать уведомление
        function showNotification(text, duration = 2000) {
            elements.notificationText.textContent = text;
            elements.notification.classList.add('show');
            elements.notificationProgress.style.width = '100%';
            
            const startTime = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = 1 - (elapsed / duration);
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    elements.notification.classList.remove('show');
                    setTimeout(() => {
                        elements.notificationProgress.style.width = '0%';
                    }, 300);
                } else {
                    elements.notificationProgress.style.width = `${remaining * 100}%`;
                }
            }, 16);
        }
        
        // Показать уведомление о монетах
        function showCoinNotification(text, duration = 2000) {
            elements.coinNotificationText.textContent = text;
            elements.coinNotification.classList.add('show');
            elements.coinNotificationProgress.style.width = '100%';
            
            const startTime = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = 1 - (elapsed / duration);
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    elements.coinNotification.classList.remove('show');
                    setTimeout(() => {
                        elements.coinNotificationProgress.style.width = '0%';
                    }, 300);
                } else {
                    elements.coinNotificationProgress.style.width = `${remaining * 100}%`;
                }
            }, 16);
        }
        
        // Показать уведомление о токенах
        function showTokenNotification(text, duration = 2000) {
            elements.tokenNotificationText.textContent = text;
            elements.tokenNotification.classList.add('show');
            elements.tokenNotificationProgress.style.width = '100%';
            
            const startTime = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = 1 - (elapsed / duration);
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    elements.tokenNotification.classList.remove('show');
                    setTimeout(() => {
                        elements.tokenNotificationProgress.style.width = '0%';
                    }, 300);
                } else {
                    elements.tokenNotificationProgress.style.width = `${remaining * 100}%`;
                }
            }, 16);
        }
        
        // Показать уведомление о деньгах
        function showMoneyNotification(text, duration = 2000) {
            elements.moneyNotificationText.textContent = text;
            elements.moneyNotification.classList.add('show');
            elements.moneyNotificationProgress.style.width = '100%';
            
            const startTime = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = 1 - (elapsed / duration);
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    elements.moneyNotification.classList.remove('show');
                    setTimeout(() => {
                        elements.moneyNotificationProgress.style.width = '0%';
                    }, 300);
                } else {
                    elements.moneyNotificationProgress.style.width = `${remaining * 100}%`;
                }
            }, 16);
        }
        
        // Показать уведомление о клиентах
        function showCustomerNotification(text, duration = 2000) {
            elements.customerNotificationText.textContent = text;
            elements.customerNotification.classList.add('show');
            elements.customerNotificationProgress.style.width = '100%';
            
            const startTime = Date.now();
            const interval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = 1 - (elapsed / duration);
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    elements.customerNotification.classList.remove('show');
                    setTimeout(() => {
                        elements.customerNotificationProgress.style.width = '0%';
                    }, 300);
                } else {
                    elements.customerNotificationProgress.style.width = `${remaining * 100}%`;
                }
            }, 16);
        }
        
        // Открытие модального окна промокодов
        function openPromoModal() {
            elements.promoModal.classList.add('active');
            elements.promoInput.focus();
        }
        
        // Закрытие модального окна промокодов
        function closePromoModal() {
            elements.promoModal.classList.remove('active');
            elements.promoInput.value = '';
        }
        
        // Переключение вкладок
        elements.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                elements.tabs.forEach(t => t.classList.remove('active'));
                elements.tabContents.forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                const tabId = tab.dataset.tab;
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
        
        // Обработчики событий
        elements.buyTokenBtn.addEventListener('click', buyToken);
        elements.withdrawButton.addEventListener('click', withdrawMoney);
        elements.withdrawAmount.addEventListener('input', () => {
            let amount = parseFloat(elements.withdrawAmount.value) || 0.10;
            amount = Math.min(amount, 0.50);
            elements.withdrawAmount.value = amount.toFixed(2);
            elements.withdrawAmountValue.textContent = amount.toFixed(2);
        });
        elements.makePizzaBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'margherita');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        elements.callCustomerBtn.addEventListener('click', callCustomers);
        elements.dailyBonusButton.addEventListener('click', claimDailyBonus);
        elements.adClose.addEventListener('click', closeAd);
        
        // Обработчики покупки ингредиентов
        elements.buyDoughBtn.addEventListener('click', () => buyIngredient('dough'));
        elements.buyTomatoBtn.addEventListener('click', () => buyIngredient('tomato'));
        elements.buyCheeseBtn.addEventListener('click', () => buyIngredient('cheese'));
        elements.buyPepperoniBtn.addEventListener('click', () => buyIngredient('pepperoni'));
        elements.buyMushroomBtn.addEventListener('click', () => buyIngredient('mushroom'));
        elements.buyHamBtn.addEventListener('click', () => buyIngredient('ham'));
        elements.buyPineappleBtn.addEventListener('click', () => buyIngredient('pineapple'));
        elements.buyParmesanBtn.addEventListener('click', () => buyIngredient('parmesan'));
        elements.buyMozzarellaBtn.addEventListener('click', () => buyIngredient('mozzarella'));
        elements.buyDorblueBtn.addEventListener('click', () => buyIngredient('dorblue'));
        
        // Обработчики рецептов пицц
        elements.makeMargheritaBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'margherita');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        
        elements.makePepperoniBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'pepperoni');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        
        elements.makeMushroomBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'mushroom');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        
        elements.makeHawaiianBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'hawaiian');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        
        elements.makeFourCheeseBtn.addEventListener('click', () => {
            const emptyOvenIndex = gameState.ovens.findIndex(oven => !oven.hasPizza);
            if (emptyOvenIndex !== -1) {
                makePizza(emptyOvenIndex, 'fourCheese');
            } else {
                showNotification('Нет свободных печей для приготовления пиццы!');
            }
        });
        
        // Обработчики улучшений
        elements.buyFastOvenBtn.addEventListener('click', () => buyUpgrade('fastOven'));
        elements.buyChefBtn.addEventListener('click', () => buyUpgrade('chef'));
        elements.buyGoldenPizzaBtn.addEventListener('click', () => buyUpgrade('goldenPizza'));
        elements.buySharpKnifeBtn.addEventListener('click', () => buyUpgrade('sharpKnife'));
        elements.buyWaiterBtn.addEventListener('click', () => buyUpgrade('waiter'));
        elements.buyAdvertisingBtn.addEventListener('click', () => buyUpgrade('advertising'));
        elements.buyVIPBtn.addEventListener('click', () => buyUpgrade('vip'));
        
        // Обработчики промокодов
        elements.promoTab.addEventListener('click', openPromoModal);
        elements.promoClose.addEventListener('click', closePromoModal);
        elements.promoActivate.addEventListener('click', activatePromoCode);
        elements.promoInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') activatePromoCode();
        });
        
        // Обработчик колеса фортуны
        elements.spinWheelBtn.addEventListener('click', spinWheel);
        
        // Запуск игры
        initGame();
    </script>
</body>
</html>